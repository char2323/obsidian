## TSP（Traveling Salesman Problem，旅行商问题）

**定义：**  
TSP 是组合优化中的经典问题。设有 ($n$) 个城市，已知每对城市之间的距离 ($d_{ij}$)。一个旅行商要从某个城市出发，访问每个城市 **恰好一次**，最后回到出发城市。目标是 **最小化总的旅行距离**。

**数学表达：**  
设城市集合为 ( ${1, 2, \dots, n}$ )，路径表示为一个排列 ( $\pi = (\pi_1, \pi_2, \dots, \pi_n)$ )，则总路程为：
$$
L(\pi) = d_{\pi_n, \pi_1} + \sum_{k=1}^{n-1} d_{\pi_k, \pi_{k+1}}
$$
TSP 的目标是找到：
$$
\pi^* = \arg \min_\pi L(\pi) 
$$
**特点：**

- NP-hard 问题：随着城市数 ($n$) 增加，计算量 **指数级增长**。
    
- 对大规模问题，暴力搜索不可行，需要 **启发式算法** 或 **近似算法**。
    

---

## 模拟退火算法（Simulated Annealing, SA）

**基本思想：**  
模拟固体物理中金属退火过程：先把金属加热到高温，然后慢慢降温，让原子排列达到最低能量状态。  
在 TSP 中，“能量”就是 **总路程**，目标是找到最短路径。

**算法步骤：**

1. **初始化**
    
    - 随机生成一个初始路径 ($\pi_0$)
        
    - 设置初始温度 ($T_0$) 和降温参数 ($\alpha$)(通常 ($0.8 \sim 0.99$))
        
2. **迭代搜索**
    
    - 在当前路径 ($\pi$) 的邻域生成新路径 ($\pi'$)（例如交换两个城市位置或反转某段路径）
        
    - 计算路程差 ($\Delta = L(\pi') - L(\pi)$)
        
    - 决策是否接受：
        
        - 如果 ($\Delta < 0$)（更短），**总是接受**
            
        - 如果 ($\Delta \ge 0$)（更长），以概率 ( $\exp(-\Delta / T)$ ) 接受
            
    - 更新当前路径：($\pi \gets \pi'$)（根据上一步决策）
        
3. **降温**
    
    - 按比例降低温度：( $T \gets \alpha T$ )
        
4. **终止条件**
    
    - 温度 ($T$) 足够低，或者达到最大迭代次数
        
5. **输出**
    
    - 当前最优路径即为近似最短路径
        

---

## 模拟退火解决 TSP 的关键点

| 关键点      | 说明                                 |
| -------- | ---------------------------------- |
| **邻域结构** | 常用 2-opt 或 3-opt：交换路径中两个城市，或反转一段路径 |
| **初始温度** | 太高容易随机性过大，太低容易陷入局部最优               |
| **降温策略** | 指数降温 ($T \gets \alpha T$) 或线性降温    |
| **接受概率** | ($\exp(-\Delta / T)$) 可以跳出局部最优     |
| **迭代次数** | 每个温度下迭代多次，保证充分搜索                   |

---

## 模拟退火的特点（TSP 应用）

- **优点**：
    
    - 可以跳出局部最优
        
    - 对大规模问题也能得到近似解
        
- **缺点**：
    
    - 依赖参数设置（初始温度、降温速率、迭代次数）
        
    - 计算速度可能比其他启发式算法慢
        

---

💡 **总结**

- TSP 是寻找最短哈密顿回路的问题
    
- 模拟退火算法是一种 **随机优化算法**，通过温度控制“接受坏解”的概率，使路径逐渐收敛到全局或近似最优解。
    

---
